<!DOCTYPE HTML>
<html>
<head>
    <script type="text/javascript">
        var url = "ws://localhost:8082";

		if (!window.WebSocket) alert("WebSocket not supported by this browser");
		
		var myWebSocket = {
			connect: function () {
				var location = url
				this._ws = new WebSocket(location);
				this._ws.onopen = this._onopen;
				this._ws.onmessage = this._onmessage;
				this._ws.onclose = this._onclose;
				this._ws.onerror = this._onerror;
			},
		
			_onopen: function () {
				console.debug("WebSocket Connected");
			},
		
			_onmessage: function (message) {
				console.debug("Message Recieved: " + message.data);
			},
		
			_onclose: function () {
				console.debug("WebSocket Closed");
				kiosk.connect();
			},
		
			_onerror: function (e) {
				console.debug("Error occured: " + e);
			},
		
			_send: function (message) {
				console.debug("Message Send: " + message);
				if (this._ws) this._ws.send(message);
			}
		};
		
		myWebSocket.connect();
		setInterval(function() {
			myWebSocket._send('msg1');
		}, 5000);
    </script>
</head>
<body>

<div id="sse">
    <a href="javascript:WebSocketTest()">Run WebSocket</a>
</div>

</body>
</html>